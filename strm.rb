# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class Strm < Formula
  desc "Command Line Interface for https://streammachine.io"
  homepage "https://streammachine.io"
  version "1.10.0"
  bottle :unneeded

  on_macos do
    if Hardware::CPU.arm?
      url "https://github.com/streammachineio/cli/releases/download/v1.10.0/strm_darwin_arm64.tar.gz"
      sha256 "36d8895d2341370f5a3b0e1b090e9fe28f44098c88c5fd1424f8f76b71a6a371"
    end
    if Hardware::CPU.intel?
      url "https://github.com/streammachineio/cli/releases/download/v1.10.0/strm_darwin_amd64.tar.gz"
      sha256 "e84461a32cbf6d522890f667d6074bc76dacc21bf741c6152c716786a70a9f56"
    end
  end

  on_linux do
    if Hardware::CPU.arm? && Hardware::CPU.is_64_bit?
      url "https://github.com/streammachineio/cli/releases/download/v1.10.0/strm_linux_arm64.tar.gz"
      sha256 "d6cb6b562218a977cc0405ff636821f0e4493dc5a53b23a3e1cd53bf3e5ca6f0"
    end
    if Hardware::CPU.intel?
      url "https://github.com/streammachineio/cli/releases/download/v1.10.0/strm_linux_amd64.tar.gz"
      sha256 "ec4f3e3cfadbb7066d2e3f70b77c51650a254662e8d855575a50f042cc78201e"
    end
  end

  def install
    bin.install "strm"
  end

  def caveats; <<~EOS
    In order to set up auto completion, please follow the instructions below. When you've set up auto completion in the past, you can skip these instructions.

     for bash users
       add the following line to your .bash_profile or .bashrc:
         source <(strm completion bash)

       to load completions for each session, execute once:
         - Linux users: strm completion bash > /etc/bash_completion.d/strm
         - macOS users: strm completion bash > /usr/local/etc/bash_completion.d/strm

     for zsh users
       ensure that shell completion is enabled, then run (only needs to be done once):
         /bin/zsh -c 'strm completion zsh > "${fpath[1]}/_strm"'

     for fish users
       strm completion fish > ~/.config/fish/completions/strm.fish # or $XDG_CONFIG_HOME instead of ~/.config
  EOS
  end

  test do
    system "#{bin}/strm --version"
  end
end
